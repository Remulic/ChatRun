{"version":3,"sources":["webpack:///D:/Desktop/italk-uniapp-main/ChatRun/pages/run/run.vue?ed5c","uni-app:///main.js","webpack:///D:/Desktop/italk-uniapp-main/ChatRun/pages/run/run.vue?508c","webpack:///D:/Desktop/italk-uniapp-main/ChatRun/pages/run/run.vue?7dff","webpack:///D:/Desktop/italk-uniapp-main/ChatRun/pages/run/run.vue?c7fc","webpack:///D:/Desktop/italk-uniapp-main/ChatRun/pages/run/run.vue?defa","uni-app:///pages/run/run.vue","webpack:///D:/Desktop/italk-uniapp-main/ChatRun/pages/run/run.vue?d9bc"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","pageIndex","polyline","meters","time","originalTime","point","isstart","isrun","isplay","isedn","latitude","longitude","scale","bottomData","innerAudioContext","_locationChangeFn","components","onLoad","methods","getStorages","uni","url","getuserLocation","geocode","type","success","console","fail","res","title","icon","duration","start","stop","end","musicCreate","ctrlMusic","location","drawline","points","color","width","dottedLine","distance","timer","setTimeout","endLoding","content","getdata","id","token","method","update","newmeters","newtime","runTime"],"mappings":";;;;;;;;;AAAA;AACA,OAAO,KAAU,EAAE,kBAKd;;;;;;;;;;;;;kDCNL;;;AAGA;AACA,sF,8FAHA;AACAA,EAAE,CAACC,iCAAH,GAAuCC,mBAAvC,CAGAC,UAAU,CAACC,YAAD,CAAV,C;;;;;;;;;;;;;ACLA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAgH;AAChH;AACuD;AACL;AACc;;;AAGhE;AAC0L;AAC1L,gBAAgB,iMAAU;AAC1B,EAAE,yEAAM;AACR,EAAE,8EAAM;AACR,EAAE,uFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,kFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAmtB,CAAgB,itBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC6DvuB;AACA,8F;;AAEA;EACAC,IADA,kBACA;IACA;MACAC,YADA;MAEAC,YAFA,EAEA;MACAC,YAHA,EAGA;MACAC,aAJA,EAIA;MACAC,eALA,EAKA;MACAC,SANA,EAMA;MACAC,UAPA,EAOA;MACAC,QARA,EAQA;MACAC,SATA,EASA;MACAC,QAVA,EAUA;MACAC,aAXA,EAWA;MACAC,cAZA,EAYA;MACAC,SAbA,EAaA;MACAC,iBAdA;MAeAC,qBAfA;MAgBAC,qBAhBA;;EAkBA,CApBA;EAqBAC,oCArBA;EAsBAC,MAtBA,oBAsBA;IACA;IACA;IACA;EACA,CA1BA;EA2BAC;IACAC,WADA,yBACA;MACA;QACA;QACA;UACA;UACA;UACA;UACA;QACA,CALA,MAKA;UACAC;YACAC,uBADA;;QAGA;QACA;MACA,CAbA,CAaA;QACA;MACA;IACA,CAlBA;IAmBAC,eAnBA,6BAmBA;MACAF;QACAG,aADA;QAEAC,aAFA;QAGAC;UACAC;UACA;UACA;QACA,CAPA;QAQAC;UACA;UACAP;YACAK,OADA,mBACAG,GADA,EACA;cACAA;gBACA,0BADA;;YAGA,CALA;YAMAD;cACAP;gBACAS,aADA;gBAEAC,aAFA;gBAGAC,cAHA;;YAKA,CAZA;;QAcA,CAxBA;;IA0BA,CA9CA;IA+CA;IACAC,KAhDA,mBAgDA;MACA;MACA;QACAN;QACA;QACA;MACA;IACA,CAvDA;IAwDA;IACAO,IAzDA,kBAyDA;MACA;MACA;QACAP;QACA;QACA;MACA,CAJA,MAIA;QACAA;QACA;MACA;MACAA;MACAA;IACA,CArEA;IAsEA;IACAQ,GAvEA,iBAuEA;MACA;MACAR;MACA;QACA;MACA,CAFA,MAEA;QACA;MACA;MACA;IACA,CAhFA;IAiFA;IACAS,WAlFA,yBAkFA;MACA;MACA;IACA,CArFA;IAsFAC,SAtFA,uBAsFA;MACA;MACAV;MACA;MACA;QACA;QACAA;QACA;QACA;UACAA;UACA;UACAA;UACA;QACA,CALA;MAMA;MACA;MAXA,KAYA;QACA;MACA;;IAEA,CA1GA;IA2GA;IACAW,QA5GA,sBA4GA;MACA;QACAjB;QACAA;MACA,CAHA;MAIA;QACAA;UACAK;YACAL;UACA,CAHA;UAIAO;YACA;YACAP;cACAK;gBACAG;kBACA,0BADA;;cAGA,CALA;;UAOA,CAbA;;QAeA;UACA;YACA;UACA,CAFA,MAEA;YACA;YACA;YACA;YACAF;YACA;YACA;cACA;YACA;YACA;YACA;UACA;QACA,CAfA;MAgBA;IACA,CAlJA;IAmJA;IACAY,QApJA,sBAoJA;MACA;QACAC,kBADA;QAEAC,gBAFA;QAGAC,QAHA;QAIAC,iBAJA;;IAMA,CA3JA;IA4JA;IACAC,QA7JA,sBA6JA;MACA;MACA;QACA;UACAjC,sCADA;UAEAC,wCAFA;;QAIA;UACAD,sCADA;UAEAC,wCAFA;;QAIA;QACA;QACA;QACA;QACA;QACAe;MACA;IACA,CA/KA;IAgLA;IACAkB,KAjLA,mBAiLA;MACA;QACA;MACA;MACAC;QACA;QACA;QACA;QACA;MACA,CALA,EAKA,GALA;;IAOA,CA5LA;IA6LA;IACAC,SA9LA,uBA8LA;MACA1B;QACAS,WADA;QAEAkB,iBAFA;QAGAtB;UACA;YACAL;cACAS,YADA;;YAGA;YACAT;UACA;QACA,CAXA;;IAaA,CA5MA;IA6MA;IACA4B,OA9MA,qBA8MA;MACA5B;QACAC,wCADA;QAEAtB;UACAkD,YADA,EACA;UACAC,iBAFA,EAFA;;QAMAC,cANA;QAOA1B;UACA;UACA;UACAC;UACA;YACA;YACA;YACAA;YACAA;;YAEA;UACA,CAPA,MAOA;YACAN;cACAS,kBADA;cAEAC,YAFA;cAGAC,cAHA;;UAKA,CANA,MAMA;YACAX;cACAC,iDADA;;UAGA;QACA,CA7BA;;IA+BA,CA9OA;IA+OA;IACA+B,MAhPA,kBAgPAC,SAhPA,EAgPAC,OAhPA,EAgPA;MACAlC;QACAC,0CADA;QAEAtB;UACAkD,YADA;UAEAN,mBAFA;UAGAY,gBAHA;UAIAL,iBAJA,EAFA;;QAQAC,cARA;QASA1B;UACA;UACA;YACAL;cACAS,aADA;cAEAC,YAFA;cAGAC,cAHA;;UAKA,CANA,MAMA;YACAX;cACAS,kBADA;cAEAC,YAFA;cAGAC,cAHA;;UAKA;QACA,CAxBA;;IA0BA,CA3QA,EA3BA,E;;;;;;;;;;;;;AChEA;AAAA;AAAA;AAAA;AAA01C,CAAgB,gxCAAG,EAAC,C","file":"pages/run/run.js","sourcesContent":["// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1671344225150\n      var cssReload = require(\"D:/Program Files/HBuilderXAplahe/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/run/run.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./run.vue?vue&type=template&id=0b61511e&\"\nvar renderjs\nimport script from \"./run.vue?vue&type=script&lang=js&\"\nexport * from \"./run.vue?vue&type=script&lang=js&\"\nimport style0 from \"./run.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../Program Files/HBuilderXAplahe/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/run/run.vue\"\nexport default component.exports","export * from \"-!../../../../../Program Files/HBuilderXAplahe/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../Program Files/HBuilderXAplahe/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../Program Files/HBuilderXAplahe/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../Program Files/HBuilderXAplahe/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../Program Files/HBuilderXAplahe/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Program Files/HBuilderXAplahe/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./run.vue?vue&type=template&id=0b61511e&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../Program Files/HBuilderXAplahe/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Program Files/HBuilderXAplahe/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../Program Files/HBuilderXAplahe/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Program Files/HBuilderXAplahe/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Program Files/HBuilderXAplahe/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./run.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../Program Files/HBuilderXAplahe/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Program Files/HBuilderXAplahe/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../Program Files/HBuilderXAplahe/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Program Files/HBuilderXAplahe/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Program Files/HBuilderXAplahe/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./run.vue?vue&type=script&lang=js&\"","<template>\n\t<view class=\"main content animate__animated animate__fadeIn animate__faster\">\r\n\t\t<!-- 顶部 -->\r\n\t\t<view class=\"top-bar\">\r\n\t\t\t<navigator :url=\"'../userhome/userhome?id='+uid\" hover-class=\"none\" class=\"top-bar-left\">\r\n\t\t\t\t<image :src=\"imgurl\"></image>\r\n\t\t\t</navigator>\r\n\t\t\t<!-- 音乐 -->\r\n\t\t\t<view class=\"top-bar-right\" :class=\"{'playing':isplay}\"  @click=\"ctrlMusic\">\r\n\t\t\t        <i class=\"music iconfont icon-yinfu\"></i>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<view class=\"body\">\r\n\t\t    <view v-if=\"!isstart\" class=\"control\" @tap=\"start\">\r\n\t\t\t\t<view  class=\"buttons\">\r\n\t\t\t\t\t<i class=\"iconfont icon-sanjiao3\"></i>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view v-else class=\"controlRun\">\r\n\t\t\t\t<view  class=\"buttons left animate__animated animate__bounceInLeft\" @tap=\"stop\"> \r\n\t\t\t\t\t<i v-show=\"isrun\" class=\"iconfont icon-zanting \"></i>\r\n\t\t\t\t\t<i v-show=\"!isrun\" class=\"iconfont icon-sanjiao3 \"></i>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view  class=\"buttons right animate__animated animate__bounceInRight \" @longpress=\"end\">\r\n\t\t\t\t\t<i class=\"iconfont icon-checkbox-full\"></i>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"runData\">\r\n\t\t\t\t<view class=\"kime\">\r\n\t\t\t\t\t<view class=\"data\">{{meters}}</view>\r\n\t\t\t\t\t<view>公里</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t\r\n\t\t\t\t<view class=\"time\">\r\n\t\t\t\t\t<view class=\"data\">{{time}}</view>\r\n\t\t\t\t\t<view>用时</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>   \r\n\t\t</view>\r\n\t\t\r\n\t\t<view class=\"content\">\r\n\t\t      <map style=\"width: 100%; height: 800rpx;\" \r\n\t\t\t  show-location \r\n\t\t\t  :layer-style='5'  \r\n\t\t\t  :show-location='true'  \r\n\t\t\t  :latitude=\"latitude\" \r\n\t\t\t  :longitude=\"longitude\"  \r\n\t\t\t  :polyline=\"polyline\"\r\n\t\t\t  :scale=\"scale\"  >\r\n\t\t       </map>\r\n\t\t    </view>\r\n\t\t\t\r\n\t\t<!--  -->\t\r\n\t\t<myFootBar :pageIndex=\"pageIndex\"></myFootBar>\r\n\t</view>\r\n\t\n</template>\n\n<script>\r\n\timport myFootBar from '@/components/myFootBar.vue'\n\timport { isProxy } from \"vue\";\r\n\timport myfun from '../../commons/js/myfun.js'\r\n\t\n\texport default {\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tpageIndex: 3,\r\n\t\t\t\tpolyline : [],\t//绘制路线\r\n\t\t\t\tmeters: 0.00,\t//路程\r\n\t\t\t\ttime: \"04:30\",  //时间\r\n\t\t\t\toriginalTime:0, //原始时间\r\n\t\t\t\tpoint:[],\t\t//坐标\r\n\t\t\t\tisstart:0,      //是否开始\r\n\t\t\t\tisrun:1,\t\t//是否运动中\r\n\t\t\t\tisplay:0,\t\t//音乐播放\r\n\t\t\t\tisedn:0,\t\t//是否结束\r\n\t\t\t\tlatitude: '0', \t//纬度\r\n\t\t\t\tlongitude: '0',\t//经度\r\n\t\t\t\tscale:13,\t\t//缩放级别\r\n\t\t\t\tbottomData:false,\r\n\t\t\t\tinnerAudioContext:{},\r\n\t\t\t\t_locationChangeFn:''\r\n\t\t\t};\n\t\t},\r\n\t\tcomponents:{myFootBar},\r\n\t\tonLoad() {\r\n\t\t\tthis.getStorages()\r\n\t\t\tthis.getuserLocation()\r\n\t\t\tthis.musicCreate()\r\n\t\t},\r\n\t\tmethods:{ \r\n\t\t\tgetStorages() {\r\n\t\t\t\ttry{\r\n\t\t\t\t\tconst value = uni.getStorageSync('user')\r\n\t\t\t\t\tif(value) {\r\n\t\t\t\t\t\tthis.uid = value.id\r\n\t\t\t\t\t\tthis.imgurl = this.serverUrl+'/'+ value.imgurl\r\n\t\t\t\t\t\tthis.token = value.token\r\n\t\t\t\t\t\tthis.myname = value.name\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\turl: '../signin/signin',\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// console.log(value)s\r\n\t\t\t\t}catch(e){\r\n\t\t\t\t\t//TODO handle the exception\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgetuserLocation(){\r\n\t\t\t\tuni.getLocation({\r\n\t\t\t\t\tgeocode:true,\r\n\t\t\t\t\ttype: 'gcj02',\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tconsole.log(res,'获取当前位置')\r\n\t\t\t\t\t\tthis.latitude=res.latitude\r\n\t\t\t\t\t\tthis.longitude=res.longitude\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t    // 重新获取位置权限\r\n\t\t\t\t\t    uni.openSetting({\r\n\t\t\t\t\t        success(res) {\r\n\t\t\t\t\t            res.authSetting = {\r\n\t\t\t\t\t                \"scope.userLocation\": true\r\n\t\t\t\t\t            }\r\n\t\t\t\t\t        },\r\n\t\t\t\t\t\t\tfail:()=>{\r\n\t\t\t\t\t\t\t          uni.showToast({\r\n\t\t\t\t\t\t\t            title: '授权失败',\r\n\t\t\t\t\t\t\t            icon:'error',\r\n\t\t\t\t\t\t\t            duration:2000\r\n\t\t\t\t\t\t\t          })\r\n\t\t\t\t\t\t\t        }\r\n\t\t\t\t\t    })  \r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 开始\r\n\t\t\tstart(){\r\n\t\t\t\tthis.isstart=!this.isstart\r\n\t\t\t\tif (this.isstart) {\r\n\t\t\t\t    console.log('start')\r\n\t\t\t\t    this.location()\r\n\t\t\t\t\tthis.timer();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 暂停与继续\r\n\t\t\tstop(){\r\n\t\t\t\tthis.isrun=!this.isrun\r\n\t\t\t\tif (this.isrun) {\r\n\t\t\t\t    console.log('start')\r\n\t\t\t\t\tthis.timer()\r\n\t\t\t\t    this.location()\r\n\t\t\t\t}else{\r\n\t\t\t\t    console.log('stop')\r\n\t\t\t\t\t// this.location()\r\n\t\t\t\t}\r\n\t\t\t\tconsole.log(this._locationChangeFn)\r\n\t\t\t\tconsole.log(this.point)\r\n\t\t\t},\r\n\t\t\t//结束\r\n\t\t\tend(){\r\n\t\t\t\tthis.isedn=1\r\n\t\t\t    console.log('end')\r\n\t\t\t\tif(this.isrun){\r\n\t\t\t\t\tthis.stop()\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.location()\r\n\t\t\t\t}\r\n\t\t\t    this.endLoding()\r\n\t\t\t},\r\n\t\t\t// 音乐\r\n\t\t\tmusicCreate(){\r\n\t\t\t\tthis.innerAudioContext = uni.createInnerAudioContext()\r\n\t\t\t\tthis.innerAudioContext.src = \"https://codehhr.gitee.io/musics/new_life.mp3\"\r\n\t\t\t},\r\n\t\t\tctrlMusic(){\r\n\t\t\t\tthis.isplay=!this.isplay\r\n\t\t\t\tconsole.log(this.isplay);\r\n\t\t\t\t    // 播放\r\n\t\t\t\tif (this.isplay) {\r\n\t\t\t\t\tthis.innerAudioContext.play()\r\n\t\t\t\t    console.log(\"music playing !\")\r\n\t\t\t\t    // 结束时循环\r\n\t\t\t\t\tthis.innerAudioContext.onEnded(() => {\r\n\t\t\t\t\t  console.log(\"music end !\")\r\n\t\t\t\t\t  this.isplay=!this.isplay\r\n\t\t\t\t\t  console.log(\"music replay !\")\r\n\t\t\t\t\t  this.ctrlMusic()\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\t// 暂停\r\n\t\t\t\telse {\r\n\t\t\t\t\tthis.innerAudioContext.stop()\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t//坐标\r\n\t\t\tlocation() {\r\n\t\t\t\tif(this.isend==1){\r\n\t\t\t\t\tuni.stopLocationUpdate(this._locationChangeFn)\r\n\t\t\t\t\tuni.offLocationUpdate(this._locationChangeFn)\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tuni.startLocationUpdate({\r\n\t\t\t\t\t    success: (res) => {\r\n\t\t\t\t\t        uni.onLocationChange(this._locationChangeFn)\r\n\t\t\t\t\t    },\r\n\t\t\t\t\t    fail: (err) => {\r\n\t\t\t\t\t        // 重新获取位置权限\r\n\t\t\t\t\t        uni.openSetting({\r\n\t\t\t\t\t            success:(res) =>{\r\n\t\t\t\t\t                res.authSetting = {\r\n\t\t\t\t\t                    \"scope.userLocation\": true\r\n\t\t\t\t\t                }\r\n\t\t\t\t\t            }\r\n\t\t\t\t\t        })\r\n\t\t\t\t\t    }\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis._locationChangeFn = (res)=> {\r\n\t\t\t\t\t\tif(this.isstart==0||this.isrun==0){\r\n\t\t\t\t\t\t\tthis.point=[]\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tlet lat = res.latitude;\r\n\t\t\t\t\t\t\tlet lng = res.longitude;\r\n\t\t\t\t\t\t\tthis.point.push({latitude: lat, longitude : lng});\r\n\t\t\t\t\t\t\tconsole.log(this.point);\r\n\t\t\t\t\t\t\t// console.log(111);\r\n\t\t\t\t\t\t\tif (this.point.length>=3) {\r\n\t\t\t\t\t\t\t\tlet shift=this.point.shift()\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthis.drawline()\r\n\t\t\t\t\t\t\tthis.distance()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//绘制路线\r\n\t\t\tdrawline() {\r\n\t\t\t    this.polyline=[{\r\n\t\t\t        points : this.point,\r\n\t\t\t        color : '#99FF00',\r\n\t\t\t        width : 4,\r\n\t\t\t        dottedLine : false\r\n\t\t\t    }]    \r\n\t\t\t},\r\n\t\t\t//计算距离\r\n\t\t\tdistance() {\r\n\t\t\t\t  let len = this.point.length;\r\n\t\t\t\t  if (len>=2) {\r\n\t\t\t\t\tlet newCover = {\r\n\t\t\t\t\t  latitude: this.point[len-1].latitude,\r\n\t\t\t\t\t  longitude:  this.point[len-1].longitude,\r\n\t\t\t\t\t};\r\n\t\t\t\t\tlet oldCover = {\r\n\t\t\t\t\t  latitude: this.point[len-2].latitude,\r\n\t\t\t\t\t  longitude:  this.point[len-2].longitude,\r\n\t\t\t\t\t};\r\n\t\t\t\t\tlet newMeters = myfun.getDistance(oldCover.latitude,oldCover.longitude,newCover.latitude,newCover.longitude)/1000;\r\n\t\t\t\t\t//计算距离\r\n\t\t\t\t\t//初始化数据\r\n\t\t\t\t\t// console.log(newMeters)\r\n\t\t\t\t\tthis.meters+=myfun.getnum(newMeters)\r\n\t\t\t\t\tconsole.log(this.meters);\r\n\t\t\t\t}\t\t\r\n\t\t\t},\r\n\t\t\t//计时器\r\n\t\t\ttimer() {\r\n\t\t\t    if (this.isrun==0) {\r\n\t\t\t        return\r\n\t\t\t    }\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t        this.originalTime += 100;\r\n\t\t\t\t\tthis.time = myfun.date_format(this.originalTime);\r\n\t\t\t\t\tthis.timer()\r\n\t\t\t\t\t// console.log(this.originalTime);\r\n\t\t\t    }, 100);\r\n\r\n\t\t\t},\r\n\t\t\t//结束弹窗\r\n\t\t\tendLoding(){\r\n\t\t\t    uni.showModal({\r\n\t\t\t      title: '提醒',\r\n\t\t\t      content: '是否保存数据',\r\n\t\t\t      success: r => {\r\n\t\t\t        if (r.confirm) {\r\n\t\t\t            uni.showLoading({\r\n\t\t\t              title: '保存中',\r\n\t\t\t            })\r\n\t\t\t            this.getdata();\r\n\t\t\t            uni.hideLoading();\r\n\t\t\t          }\r\n\t\t\t        }\r\n\t\t\t    })\r\n\t\t\t},\r\n\t\t\t//获取总数据\r\n\t\t\tgetdata(){\r\n\t\t\t    uni.request({\r\n\t\t\t    \turl: this.serverUrl+'/run/findrundate',\r\n\t\t\t    \tdata:{\r\n\t\t\t    \t\tid: this.uid,\t// 传参来的id\r\n\t\t\t    \t\ttoken: this.token\r\n\t\t\t    \t},\r\n\t\t\t    \tmethod: 'POST',\r\n\t\t\t\t\tsuccess: (data)=>{\r\n\t\t\t\t\t\tlet status = data.data.status\r\n\t\t\t\t\t\tlet res = data.data.result\r\n\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t\tif(status===200){\r\n\t\t\t\t\t\t\tlet newmeters=this.meters+res.distance\r\n\t\t\t\t\t\t\tlet newtime=myfun.getnum(this.originalTime/60000)+res.runTime\r\n\t\t\t\t\t\t\tconsole.log(newmeters,newtime);\r\n\t\t\t\t\t\t\tconsole.log(typeof newtime);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tthis.update(newmeters,newtime)\r\n\t\t\t\t\t\t}else if(status===500){\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t    title: '服务器出错了...',\r\n\t\t\t\t\t\t\t\t\ticon:'none',\r\n\t\t\t\t\t\t\t    duration: 1500\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}else if(status===300){\t// token过期\r\n\t\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\t\turl:'/pages/signin/signin?name='+this.myname\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//更新数据\r\n\t\t\tupdate(newmeters,newtime){\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: this.serverUrl+'/run/updaterundate',\r\n\t\t\t\t\tdata:{\r\n\t\t\t\t\t\tid:this.uid,\r\n\t\t\t\t\t\tdistance: newmeters,\r\n\t\t\t\t\t\trunTime: newtime,\r\n\t\t\t\t\t\ttoken: this.token\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\tsuccess: (data)=>{\r\n\t\t\t\t\t\tlet status = data.data.status\r\n\t\t\t\t\t\tif(status===200){\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t    title: '修改成功',\r\n\t\t\t\t\t\t\t\t\ticon:'none',\r\n\t\t\t\t\t\t\t    duration: 1500\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}else if(status===500){\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t    title: '服务器出错了...',\r\n\t\t\t\t\t\t\t\t\ticon:'none',\r\n\t\t\t\t\t\t\t    duration: 1500\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\n\t}\r\n</script>\n\n<style lang=\"scss\">\n\t@import '../../commons/css/mycss.scss';\r\n\t.top-bar {\r\n\t\tbackground: $uni-color-primary;\r\n\t\t.top-bar-right {\r\n\t\t\tmargin-top: 4rpx;\r\n\t\t\t\r\n\t\t\t/* 音符 */\r\n\t\t\t.music { \r\n\t\t\t  // padding-left: 20rpx;\r\n\t\t\t  font-size: 40rpx;\r\n\t\t\t}\r\n\t\t}\r\n\t\t.playing {\r\n\t\t  animation: rotate 2s linear infinite;\r\n\t\t}\r\n\t\t/* 音符旋转动画 */\r\n\t\t@keyframes rotate {\r\n\t\t  from {\r\n\t\t      transform: rotate(360deg);\r\n\t\t  }\r\n\t\t  to {\r\n\t\t      transform: rotate(0deg);\r\n\t\t  }\r\n\t\t}\r\n\t}\r\n\t\r\n\t.main {\r\n\t\tpadding: 128rpx $uni-spacing-col-base;\r\n\t\t.body {\r\n\t\t\tpadding-top: $uni-spacing-col-base;\r\n\t\t\twidth: 100%;\r\n\t\t\theight: 60%;\r\n\t\t\tpadding: 60rpx 0;\r\n\t\t\tfont-size: 40px;\r\n\t\t\ti{\r\n\t\t\t\tfont-size: 50rpx;\r\n\t\t\t}\r\n\t\t\t.control{\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tjustify-content: center;\r\n\t\t\t\t.buttons {\r\n\t\t\t\t  width: 200px;\r\n\t\t\t\t  height: 200px;\r\n\t\t\t\t  border-radius: 50%;\r\n\t\t\t\t  background-color: rgb(252, 6, 6);\r\n\t\t\t\t  text-align: center;\r\n\t\t\t\t  line-height: 200rpx;\r\n\t\t\t\t  color: seashell;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t.controlRun{\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tjustify-content: center;\r\n\t\t\t\t.buttons {\r\n\t\t\t\t\twidth: 200px;\r\n\t\t\t\t\theight: 200px;\r\n\t\t\t\t\tborder-radius: 50%;\r\n\t\t\t\t\ttext-align: center;\r\n\t\t\t\t\tline-height: 200rpx;\r\n\t\t\t\t\tcolor: seashell;\r\n\t\t\t\t\tmargin: 0 20rpx;\r\n\t\t\t\t}\r\n\t\t\t\t.left{\r\n\t\t\t\t\tbackground-color: rgb(12, 191, 84);\r\n\t\t\t\t}\r\n\t\t\t\t.right{\r\n\t\t\t\t\tbackground-color: rgb(252, 6, 6);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t.runData{\r\n\t\t\t\tmargin-top: 40rpx;\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\tfont-size: 20rpx;\r\n\t\t\t\t.kime{\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\tjustify-items: center;\r\n\t\t\t\t\talign-items: center;\r\n\t\t\t\t\tflex-direction: column;\r\n\t\t\t\t\t.data{\r\n\t\t\t\t\t\tfont-size: 100rpx;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t.time{\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\tjustify-items: center;\r\n\t\t\t\t\talign-items: center;\r\n\t\t\t\t\tflex-direction: column;\r\n\t\t\t\t\t.data{\r\n\t\t\t\t\t\tfont-size: 60rpx;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t}\r\n\n</style>\n","import mod from \"-!../../../../../Program Files/HBuilderXAplahe/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../Program Files/HBuilderXAplahe/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../Program Files/HBuilderXAplahe/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Program Files/HBuilderXAplahe/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../Program Files/HBuilderXAplahe/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../Program Files/HBuilderXAplahe/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../Program Files/HBuilderXAplahe/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../Program Files/HBuilderXAplahe/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Program Files/HBuilderXAplahe/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./run.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../Program Files/HBuilderXAplahe/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../Program Files/HBuilderXAplahe/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../Program Files/HBuilderXAplahe/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Program Files/HBuilderXAplahe/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../Program Files/HBuilderXAplahe/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../Program Files/HBuilderXAplahe/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../Program Files/HBuilderXAplahe/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../Program Files/HBuilderXAplahe/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Program Files/HBuilderXAplahe/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./run.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}