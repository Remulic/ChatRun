(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-discuss-discuss"],{"1cf7":function(t,e,n){"use strict";n("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={dataTime:function(t){var e=new Date(t),n=new Date,a=e.getHours(),i=e.getMinutes(),s=e.getFullYear(),r=e.getMonth()+1,c=e.getDate(),o=(n.getTime(),n.getHours(),n.getMinutes(),n.getFullYear()),u=n.getMonth()+1,d=n.getDate();return c===d&&r===u&&s===o?(a<10&&(a="0"+a),i<10&&(i="0"+i),a+":"+i):c+1===d&&r===u&&s===o?(a<10&&(a="0"+a),i<10&&(i="0"+i),"昨天 "+a+":"+i):s+"/"+r+"/"+c},detialTime:function(t){var e=new Date(t),n=(new Date,e.getHours()),a=e.getMinutes(),i=e.getFullYear(),s=e.getMonth()+1,r=e.getDate();return s<10&&(s="0"+s),r<10&&(r="0"+r),n<10&&(n="0"+n),a<10&&(a="0"+a),i+"-"+s+"-"+r+" "+n+":"+a},dataTime1:function(t){var e=new Date(t),n=new Date,a=e.getHours(),i=e.getMinutes(),s=e.getFullYear(),r=e.getMonth()+1,c=e.getDate(),o=(n.getTime(),n.getHours(),n.getMinutes(),n.getFullYear()),u=n.getMonth()+1,d=n.getDate();return c===d&&r===u&&s===o?(a<10&&(a="0"+a),i<10&&(i="0"+i),a+":"+i):c+1===d&&r===u&&s===o?(a<10&&(a="0"+a),i<10&&(i="0"+i),"昨天 "+a+":"+i):s===o?(a<10&&(a="0"+a),i<10&&(i="0"+i),r+"月"+c+"日 "+a+":"+i):(a<10&&(a="0"+a),i<10&&(i="0"+i),s+"年"+r+"月"+c+"日 "+a+":"+i)},fileName:function(t){var e=new Date(t),n=e.getFullYear(),a=e.getMonth()+1,i=e.getDate();return a<10&&(a="0"+a),i<10&&(i="0"+i),n+a+i},spacTime:function(t,e){t=new Date(t),e=new Date(e);var n=t.getTime(),a=e.getTime();return a>n+3e5?e:""},debounce:function(t,e){var n,a=e||500;return function(){var e=this,i=arguments;n&&clearTimeout(n),n=setTimeout((function(){n=null,t.apply(e,i)}),a)}},Throttle:function(t,e){var n,a,i=e||500;return function(){var e=this,s=arguments,r=+new Date;n&&r-n<i?(clearTimeout(a),a=setTimeout((function(){n=r,t.apply(e,s)}),i)):(n=r,t.apply(this,s))}},mySort:function(t,e,n){var a;if(0===n){for(var i=1;i<t.length;i++)for(var s=i;s>0;s--)t[s][e]>t[s-1][e]&&(a=t[s],t[s]=t[s-1],t[s-1]=a);return t}if(1===n){for(var r=1;r<t.length;r++)for(var c=r;c>0;c--)t[c][e]<t[c-1][e]&&(a=t[c],t[c]=t[c-1],t[c-1]=a);return t}},date_format:function(t){var e=Math.floor(t/1e3),n=Math.floor(e/3600),a=s(Math.floor((e-3600*n)/60)),i=s(e-3600*n-60*a);return n+":"+a+":"+i+" ";function s(t){return t<10?"0"+t:t}},getDistance:function(t,e,n,a){var i=u(t),s=u(n),r=i-s,c=u(e)-u(a),o=2*Math.asin(Math.sqrt(Math.pow(Math.sin(r/2),2)+Math.cos(i)*Math.cos(s)*Math.pow(Math.sin(c/2),2)));return 6378137*o;function u(t){return t*Math.PI/180}},getnum:function(t){return Math.round(100*t)/100}};e.default=a},2185:function(t,e,n){"use strict";var a=n("a4a2"),i=n.n(a);i.a},"44b2":function(t,e,n){"use strict";n.r(e);var a=n("abd5"),i=n("5b24");for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);n("2185");var r=n("f0c5"),c=Object(r["a"])(i["default"],a["b"],a["c"],!1,null,"6c59f1d4",null,!1,a["a"],void 0);e["default"]=c.exports},"5b24":function(t,e,n){"use strict";n.r(e);var a=n("c2db"),i=n.n(a);for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);e["default"]=i.a},a4a2:function(t,e,n){var a=n("dc8c");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=n("4f06").default;i("8f9c9152",a,!0,{sourceMap:!1,shadowMode:!1})},abd5:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){}));var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"main"},[n("v-uni-view",{staticClass:"animate__animated animate__bounceInLeft card"},[n("v-uni-view",{staticClass:"list"},[n("v-uni-navigator",{attrs:{url:"../userhome/userhome?id="+t.dynamic.userid}},[n("v-uni-image",{attrs:{src:t.dynamic.imgurl,mode:""}})],1),n("v-uni-view",{staticClass:"names"},[n("v-uni-view",{staticClass:"name"},[n("v-uni-view",[t._v(t._s(t.dynamic.name))]),t.dynamic.userid==t.uid?n("v-uni-view",{staticClass:"nameright",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.deletedynamic(t.dynamic.id,t.index)}}},[n("i",{staticClass:"iconfont icon-gengduo"})]):t._e()],1),n("v-uni-view",{staticClass:"time",domProps:{innerHTML:t._s(t.dynamic.time)}})],1)],1),n("v-uni-view",{staticClass:"msg"},[n("v-uni-view",{staticClass:"message"},[t._v(t._s(t.dynamic.message))]),t.dynamic.picture?n("v-uni-view",{staticClass:"imgArea"},t._l(t.dynamic.picture,(function(e,a){return n("v-uni-view",{on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.previewImg(e)}}},[n("v-uni-image",{attrs:{src:e,mode:""}})],1)})),1):t._e()],1),n("v-uni-view",{staticClass:"talk"},[n("v-uni-view",{staticClass:"talk-left"},[n("i",{staticClass:"iconfont icon-redu"}),t._v("热度"+t._s(t.dynamic.talker))]),n("v-uni-view",{staticClass:"talk-right"},[n("i",{staticClass:"iconfont icon-pinglun",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.isinput=!0}}})])],1),n("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.isinput,expression:"isinput"}],staticClass:"sendcomment"},[n("v-uni-input",{staticClass:"search",attrs:{focus:"true",placeholder:"我也来句废话","placeholder-style":"color: #aaa;"},model:{value:t.message,callback:function(e){t.message=e},expression:"message"}}),n("v-uni-view",{staticClass:"top-bar-right ",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.sendcomment.apply(void 0,arguments)}}},[t._v("发送")])],1)],1),t._l(t.commentArr,(function(e,a){return n("v-uni-view",{staticClass:"comment animate__animated animate__bounceInLeft",on:{longpress:function(n){arguments[0]=n=t.$handleEvent(n),t.deletediscuss(e,a)}}},[n("v-uni-view",{staticClass:"name",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.moveuser(e)}}},[t._v(t._s(e.name)+" :")]),n("v-uni-view",{staticClass:"message"},[t._v(t._s(e.message))])],1)}))],2)},i=[]},c2db:function(t,e,n){"use strict";(function(t){n("7a82");var a=n("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("d3b7"),n("159b"),n("99af"),n("a434");var i=a(n("1cf7")),s={data:function(){return{isinput:!1,nowPage:0,uid:"",imgurl:"",token:"",myname:"",id:"",dynamic:"",commentArr:[],message:""}},onLoad:function(t){this.id=t.id,this.getStorages(),this.getDynamic(),this.discussLoad()},methods:{getStorages:function(){try{var t=uni.getStorageSync("user");t?(this.uid=t.id,this.imgurl=this.serverUrl+"/"+t.imgurl,this.token=t.token,this.myname=t.name):uni.navigateTo({url:"../signin/signin"})}catch(e){}},getDynamic:function(){var e=this;uni.request({url:this.serverUrl+"/dynamic/finddynamic",data:{id:this.id,token:this.token},method:"POST",success:function(n){var a=n.data.status,s=n.data.result;t("log",s," at pages/discuss/discuss.vue:120"),200===a?(s.time=i.default.dataTime(s.time),e.dynamic=s,t("log",s," at pages/discuss/discuss.vue:124")):500===a?uni.showToast({title:"服务器出错了...",icon:"none",duration:1500}):300===a&&uni.navigateTo({url:"/pages/signin/signin?name="+e.myname})}})},discussLoad:function(){var e=this;uni.request({url:this.serverUrl+"/discuss/discussload",data:{id:this.id,pageSize:10,nowPage:this.nowPage,token:this.token},method:"POST",success:function(n){var a=n.data.status,s=n.data.result;t("log",s," at pages/discuss/discuss.vue:152"),200===a?(s.forEach((function(t){t.time=i.default.dataTime(t.time)})),e.commentArr=e.commentArr.concat(s),e.nowPage++,t("log",e.commentArr," at pages/discuss/discuss.vue:159")):500===a?uni.showToast({title:"服务器出错了...",icon:"none",duration:1500}):300===a&&uni.navigateTo({url:"/pages/signin/signin?name="+e.myname})}})},sendcomment:function(){var e=this;uni.request({url:this.serverUrl+"/discuss/newdiscuss",data:{uid:this.uid,message:this.message,token:this.token,name:this.myname,id:this.id},method:"POST",success:function(n){var a=n.data.status,i=n.data.result;t("log",i," at pages/discuss/discuss.vue:189"),200===a?(e.commentArr.push(i),t("log",e.commentArr," at pages/discuss/discuss.vue:192"),e.isinput=!1):500===a?uni.showToast({title:"服务器出错了...",icon:"none",duration:1500}):300===a&&uni.navigateTo({url:"/pages/signin/signin?name="+e.myname})}})},deletediscuss:function(t,e){var n=this;this.uid==t.userid&&uni.showModal({title:"提醒",content:"是否删去本条评论",success:function(a){a.confirm&&uni.request({url:n.serverUrl+"/discuss/deletediscuss",data:{id:t.id,token:n.token},method:"POST",success:function(t){var a=t.data.status;if(200===a)n.commentArr.splice(e,1);else 500===a?uni.showToast({title:"服务器出错了...",icon:"none",duration:1500}):300===a&&uni.navigateTo({url:"/pages/signin/signin?name="+n.myname})}})}})},moveuser:function(t){uni.navigateTo({url:"../userhome/userhome?id="+t.userid})}}};e.default=s}).call(this,n("0de9")["log"])},dc8c:function(t,e,n){var a=n("24fb");e=a(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.main .list[data-v-6c59f1d4]{width:100%;padding:%?10?% 0;display:flex}.main .list uni-image[data-v-6c59f1d4]{float:left;width:%?80?%;height:%?80?%;border-radius:%?20?%}.main .card[data-v-6c59f1d4]{padding:%?20?%;background:#fafafa;width:100%;border-bottom:%?1?% solid #c9c9c9}.main .card .names[data-v-6c59f1d4]{margin-left:%?10?%}.main .card .names .name[data-v-6c59f1d4]{font-size:%?36?%;color:#272832;line-height:%?50?%}.main .card .names .name .nameright[data-v-6c59f1d4]{position:relative;bottom:%?60?%}.main .card .names .name .nameright i[data-v-6c59f1d4]{float:right;font-size:%?35?%}.main .card .names .time[data-v-6c59f1d4]{font-size:%?24?%;color:#272832;line-height:%?28?%}.main .card .msg[data-v-6c59f1d4]{font-size:%?30?%;float:left;width:100%;padding:%?20?% 0}.main .card .imgArea[data-v-6c59f1d4]{display:flex;flex-wrap:wrap;padding-right:%?30?%;width:100%}.main .card .imgArea uni-image[data-v-6c59f1d4]{width:%?250?%;height:%?250?%;margin:0 %?10?% %?10?% 0}.main .card .talk[data-v-6c59f1d4]{font-size:%?24?%;color:#fa560a;width:100%;display:flex;flex-wrap:wrap;justify-content:space-between}.main .card .talk .talk-right[data-v-6c59f1d4]{padding-right:%?40?%}.main .card .talk i[data-v-6c59f1d4]{font-size:%?30?%}.main .card .sendcomment[data-v-6c59f1d4]{margin-top:%?10?%;display:flex}.main .card .sendcomment uni-input[data-v-6c59f1d4]{width:80%;padding-top:%?10?%;background-color:#ececec;border-radius:%?10?%;border:%?2?% solid #9e9e9e}.main .card .sendcomment .top-bar-right[data-v-6c59f1d4]{padding-right:%?30?%;font-size:%?32?%;color:#272832;line-height:%?60?%;width:%?120?%;height:%?60?%;border-radius:%?10?%;text-align:center;background-color:#ececec}.main .comment[data-v-6c59f1d4]{padding:%?20?%;background-color:#fafafa;display:flex;font-size:%?30?%}.main .comment .message[data-v-6c59f1d4]{margin-left:%?20?%}.main .right-btn[data-v-6c59f1d4]{float:right;width:%?120?%;height:%?48?%;border-radius:%?24?%;font-size:%?24?%;line-height:%?48?%;text-align:center}.main .send[data-v-6c59f1d4]{background:#ffe431;color:#272832}',""]),t.exports=e}}]);